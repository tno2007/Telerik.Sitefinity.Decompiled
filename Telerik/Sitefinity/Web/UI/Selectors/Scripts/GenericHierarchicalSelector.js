Type.registerNamespace("Telerik.Sitefinity.Taxonomies.Web.UI.Hierarchical");
Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector=function(element){this._element=element;
this._selectorTitle=null;
this._doneButton=null;
this._treeView=null;
this._rootRadio=null;
this._nodesRadio=null;
this._rootRadioLabel=null;
this._nodesRadioLabel=null;
this._treePanel=null;
this._treeBinder=null;
this._noNodesCreatedLabel=null;
this._noNodesPanel=null;
this._selectorTitleText=null;
this._selectRootText=null;
this._noNodesHaveBeenCreatedText=null;
this._rootNodeId=null;
this._allowRootSelection=false;
this._showDoneSelectingButton=false;
this._showBinder=false;
this._rootRadioClickDelegate=null;
this._nodesRadioClickDelegate=null;
this._doneButtonClickDelegate=null;
this._onLoadDelegate=null;
this._dataBoundDelagete=null;
this._isServiceUrlsSet=false;
this._isControlsConfigured=false;
this._bindOnLoad=true;
this._rootRadioTextTemplate=null;
this._selectorTitleTextTemplate=null;
this._controlLoaded=false;
Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector.initializeBase(this,[element]);
};
Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector.prototype={initialize:function(){if(this._doneButtonClickedDelegate==null){this._doneButtonClickedDelegate=Function.createDelegate(this,this._doneButtonClicked);
}if(this._doneButton){$addHandler(this._doneButton,"click",this._doneButtonClickedDelegate);
}if(this._treeViewNodeClickedDelegate==null){this._treeViewNodeClickedDelegate=Function.createDelegate(this,this._treeViewNodeClicked);
}if(this._treeView){this._treeView.control.add_nodeClicked(this._treeViewNodeClickedDelegate);
}if(this._rootRadioClickDelegate==null){this._rootRadioClickDelegate=Function.createDelegate(this,this._rootRadioClicked);
}if(this._rootRadio){$addHandler(this._rootRadio,"click",this._rootRadioClickDelegate);
}if(this._nodesRadioClickDelegate==null){this._nodesRadioClickDelegate=Function.createDelegate(this,this._nodesRadioClicked);
}if(this._nodesRadio){$addHandler(this._nodesRadio,"click",this._nodesRadioClickDelegate);
}this._showBinder=$(this._nodesRadio).is(":checked")||this._allowRootSelection==false;
if(this._dataBoundDelegate==null){this._dataBoundDelagete=Function.createDelegate(this,this._onDataBound);
}Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector.callBaseMethod(this,"initialize");
Sys.Application.add_load(Function.createDelegate(this,this.onload));
},dispose:function(){if(this._rootRadio&&this._rootRadioClickDelegate){$removeHandler(this._rootRadio,"click",this._rootRadioClickDelegate);
}if(this._nodesRadio&&this._nodesRadioClickDelegate){$removeHandler(this._nodesRadio,"click",this._nodesRadioClickDelegate);
}if(this._doneButtonClickDelegate!=null){delete this._doneButtonClickDelegate;
}if(this._rootRadioClickDelegate!=null){delete this._rootRadioClickDelegate;
}if(this._nodesRadioClickDelegate!=null){delete this._nodesRadioClickDelegate;
}if(this._onLoadDelegate!=null){delete this._onLoadDelegate;
}if(this._dataBoundDelegate!=null){delete this._dataBoundDelagete;
}Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector.callBaseMethod(this,"dispose");
},onload:function(){this._controlLoaded=true;
this._treeBinder.add_onDataBound(this._dataBoundDelagete);
this._configureControls();
},dataBind:function(dataKey,context){if(!this._isServiceUrlsSet){this._setServiceUrls();
}if(this._showBinder){this._hideLoadingScreen(true);
this._treeBinder.DataBind(dataKey,context);
}},clearSelection:function(){this._treeBinder.clearSelection();
},showTreePanel:function(){if(this._treeBinder.get_hasNoData()){$(this._noNodesPanel).show();
}else{$(this._treePanel).show();
if(this._showDoneSelectingButton){$(this._doneButton).show();
}if(this._showCreateNewTaxonButton){$(this._createTaxonButton).show();
}}},hideTreePanel:function(){$(this._noNodesPanel).hide();
$(this._treePanel).hide();
if(this._showDoneSelectingButton){$(this._doneButton).hide();
}if(this._showCreateNewTaxonButton){$(this._createTaxonButton).hide();
}},add_selectionDone:function(delegate){this.get_events().addHandler("selectionDone",delegate);
},remove_selectionDone:function(delegate){this.get_events().removeHandler("selectionDone",delegate);
},add_nodesRootChoiceChanged:function(delegate){this.get_events().addHandler("nodesRootChoiceChanged",delegate);
},remove_nodesRootChoiceChanged:function(delegate){this.get_events().removeHandler("nodesRootChoiceChanged",delegate);
},_selectionDoneHandler:function(args){var eventArgs=args;
var h=this.get_events().getHandler("selectionDone");
if(h){h(this,eventArgs);
}return eventArgs;
},_doneButtonClicked:function(){var args={selectedNode:this.get_selectedNode()};
if(args.selectedNode!=null){this._selectionDoneHandler(args);
}},_treeViewNodeClicked:function(){this._doneButton.classList.remove("sfDisabledLinkBtn");
},_rootRadioClicked:function(sender,args){this._showBinder=false;
this._configureSelectorMode();
args={selectedNode:this.get_selectedNode(),commandName:"create"};
this._nodesRootChoiceChanged(sender,args);
},_nodesRadioClicked:function(sender,args){this._doneButton.classList.add("sfDisabledLinkBtn");
this._showBinder=true;
this._configureSelectorMode();
this._nodesRootChoiceChanged();
},_nodesRootChoiceChanged:function(sender,eventArgs){var h=this.get_events().getHandler("nodesRootChoiceChanged");
if(h){h(this,eventArgs);
}return eventArgs;
},_setServiceUrls:function(){this._treeBinder.set_orginalServiceBaseUrl(String.format(this._treeBinder.get_orginalServiceBaseUrl(),this._rootNodeId));
this._treeBinder.set_serviceChildItemsBaseUrl(String.format(this._treeBinder.get_serviceChildItemsBaseUrl(),this._rootNodeId));
this._treeBinder.set_servicePredecessorBaseUrl(String.format(this._treeBinder.get_servicePredecessorBaseUrl(),this._rootNodeId));
},_hideLoadingScreen:function(hide){if(jQuery(".RadAjax").length==0){return;
}jQuery(".RadAjax").each(function(i,el){if(hide){this.style.visibility="hidden";
}else{this.style.visibility="visible";
}});
},_configureControls:function(){this._set_nodesRadioText();
this._set_rootRadioText();
this._set_selectorTitleText();
if(this._showBinder){if(this._bindOnLoad){this.dataBind();
}}else{this.hideTreePanel();
}},_set_nodesRadioText:function(){if(this._controlLoaded&&this._nodesRadioLabel){this._nodesRadioLabel.innerHTML=this.get_nodesRadioText();
}},_set_rootRadioText:function(){if(this._controlLoaded&&this._rootRadioLabel){this._rootRadioLabel.innerHTML=String.format(this._rootRadioTextTemplate,this.get_rootRadioText());
}},_set_selectorTitleText:function(){if(this._controlLoaded){this._selectorTitle.innerHTML=String.format(this._selectorTitleTextTemplate,this.get_selectorTitleText());
}},_onDataBound:function(){this.showTreePanel();
this._nodesRootChoiceChanged();
this._hideLoadingScreen(false);
},_configureSelectorMode:function(){if(this._showBinder){this.dataBind();
}else{this.hideTreePanel();
}},get_selectorTitle:function(){return this._selectorTitle;
},set_selectorTitle:function(value){this._selectorTitle=value;
},get_doneButton:function(){return this._doneButton;
},set_doneButton:function(value){this._doneButton=value;
},get_treeView:function(){return this._treeView;
},set_treeView:function(value){this._treeView=value;
},get_rootRadio:function(){return this._rootRadio;
},set_rootRadio:function(value){this._rootRadio=value;
},get_nodesRadio:function(){return this._nodesRadio;
},set_nodesRadio:function(value){this._nodesRadio=value;
},get_rootRadioLabel:function(){return this._rootRadioLabel;
},set_rootRadioLabel:function(value){this._rootRadioLabel=value;
},get_nodesRadioLabel:function(){return this._nodesRadioLabel;
},set_nodesRadioLabel:function(value){this._nodesRadioLabel=value;
},get_treePanel:function(){return this._treePanel;
},set_treePanel:function(value){this._treePanel=value;
},get_treeBinder:function(){return this._treeBinder;
},set_treeBinder:function(value){this._treeBinder=value;
},get_selectedNode:function(){if($(this._nodesRadio).is(":checked")||this._allowRootSelection==false){var selectedNodes=this._treeBinder.get_selectedItems();
if(selectedNodes==null||selectedNodes.length==0){return null;
}return selectedNodes[0];
}return null;
},get_noNodesCreatedLabel:function(){return this._noNodesCreatedLabel;
},set_noNodesCreatedLabel:function(value){this._noNodesCreatedLabel=value;
},get_rootNodeId:function(){return this._rootNodeId;
},set_rootNodeId:function(value){if(value!=this._rootNodeId){this._rootNodeId=value;
this._isServiceUrlsSet=false;
}},get_selectorTitleText:function(){return this._selectorTitleText;
},set_selectorTitleText:function(value){if(value!=this._selectorTitleText){this._selectorTitleText=value;
this._set_selectorTitleText();
}},get_rootRadioText:function(){return this._rootRadioText;
},set_rootRadioText:function(value){if(value!=this._rootRadioText){this._rootRadioText=value;
this._set_rootRadioText();
}},get_nodesRadioText:function(){return this._nodesRadioText;
},set_nodesRadioText:function(value){if(value!=this._nodesRadioText){this._nodesRadioText=value;
this._set_nodesRadioText();
}},get_showBinder:function(){return this._showBinder;
},set_showBinder:function(value){this._showBinder=value;
},get_bindOnLoad:function(){return this._bindOnLoad;
},set_bindOnLoad:function(value){this._bindOnLoad=value;
},get_noNodesPanel:function(){return this._noNodesPanel;
},set_noNodesPanel:function(value){this._noNodesPanel=value;
}};
Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector.registerClass("Telerik.Sitefinity.Web.UI.GenericHierarchicalSelector",Sys.UI.Control);
